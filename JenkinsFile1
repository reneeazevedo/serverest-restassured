pipeline {
    agent {
        docker {
        image 'maven:latest'
        }
    }
    stages {
        stage('Build and Test') {
            steps {
                sh 'mvn clean test'
            }
        }
        stage('Allure Report') {
            steps {
                sh 'allure generate target/surefire-reports --clean -o target/allure-report'
                allure includeProperties: false, jdk: '', properties: [], reportBuildPolicy: 'ALWAYS', results: [[path: 'target/allure-report']]
        }
    }
  }
}